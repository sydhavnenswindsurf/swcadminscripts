{"version":3,"sources":["PageViewModel.clientjs.ts"],"names":[],"mappings":"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","file":"PageViewModel.clientjs.js","sourcesContent":["/// <reference path=\"../../index.d.ts\" />\n\nclass PageViewModel{\n    /**\n     *\n     */\n    constructor() {\n         this.loadIndmeldelser();\n\n    }\n     isCallingServer  = ko.observable<Boolean>(false);\n     indmeldelser = ko.observableArray([]);    \n      logMessages = ko.observableArray([\"VÃ¦lg en handling\"]);\n    public  indmeld (email:string){\n           this.isCallingServer(true);\n           callGoogleApi((result)=> \n           this.feedBack(email,result), this.defaultErrorHandler)\n           .indmeld(email);\n      }\n     private feedBack(email:string,result:any){\n         this.isCallingServer(false);\n         if(result.success){ \n            $.each(this.indmeldelser().filter(function(item){return item.email===email;}),function(index,item){\n                    item.status(result.newStatus);\n              \n              });\n         }\n         this.logMessages.push(result.message);\n      }      \n      \n      public sendVelkomstMail (email){\n            this.isCallingServer(true);\n            callGoogleApi((result)=> { this.feedBack(email,result); },this.defaultErrorHandler)\n             .sendVelkomstMail(email);\n\n      }\n      public afvis (email){\n            this.isCallingServer(true);\n            callGoogleApi((result)=>{ this.feedBack(email,result);},this.defaultErrorHandler)\n             .afvis(email);\n\n      }\n      \n      private defaultErrorHandler (message:string){\n           this.isCallingServer(false);\n           console.log(message);\n           alert(message);\n      }\n      public sendInviteTestMail(){\n         callGoogleApi(()=>{this.logMessages.push(\"sendt test mail\");},this.defaultErrorHandler).sendInviteTestMail();\n      }\n      public sendConfirmationTestMail (){\n         callGoogleApi(()=>{this.logMessages.push(\"sendt test mail\");},this.defaultErrorHandler).sendConfirmationTestMail();\n      }\n      \n      private loadIndmeldelser (){\n          callGoogleApi((result)=>{\n             this.indmeldelser(result.map((item)=>{\n                item.status =ko.observable(item.status);\n                return item;\n             }));\n          },this.defaultErrorHandler).getUbehandledeIndmeldelser();\n      \n      }\n      \n  }\n  \n\n\n"]}